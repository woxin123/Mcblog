<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Java å¹¶å‘ä¹‹æ— é” | ğŸŒŸè¡Œè€… åšå®¢</title>
    <meta property="og:title" content="Java å¹¶å‘ä¹‹æ— é” - ğŸŒŸè¡Œè€… åšå®¢">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2018-10-09T17:15:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2018-10-09T17:15:00&#43;08:00'>
        
    <meta name="Keywords" content="java,kotlin,android,åç«¯">
    <meta name="description" content="Java å¹¶å‘ä¹‹æ— é”">
        
    <meta name="author" content="MC">
    <meta property="og:url" content="https://blog.mengchen.online/post/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E6%97%A0%E9%94%81/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    


    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://blog.mengchen.online">
                        ğŸŒŸè¡Œè€… åšå®¢
                    </a>
                
                <p class="description">Android åç«¯èœé¸Ÿ</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://blog.mengchen.online">é¦–é¡µ</a>
                    
                    <a  href="https://blog.mengchen.online/tools/" title="å·¥å…·">å·¥å…·</a>
                    
                    <a  href="https://blog.mengchen.online/archives/" title="å½’æ¡£">å½’æ¡£</a>
                    
                    <a  href="https://blog.mengchen.online/about" title="å…³äº">å…³äº</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <article class="post">
        <header>
            <h1 class="post-title">Java å¹¶å‘ä¹‹æ— é”</h1>
        </header>
        <date class="post-meta meta-date">
            2018å¹´10æœˆ9æ—¥
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='https://blog.mengchen.online/categories/Java'>Java</a></span>
            
            <span class="meta-category"><a href='https://blog.mengchen.online/categories/%E5%B9%B6%E5%8F%91'>å¹¶å‘</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    é˜…è¯»</span></span>
        </div>
        

        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">æ–‡ç« ç›®å½•</div>
            </div>
        </div>
        
        <div class="post-content">
            <h1 id="javaå¹¶å‘ç¼–ç¨‹ä¹‹æ— é”">Javaå¹¶å‘ç¼–ç¨‹ä¹‹æ— é”</h1>
<p>åœ¨è°ˆè®ºæ— æ‰€ä¹‹å‰å…ˆæ¥çœ‹çœ‹ä¹è§‚æ´¾å’Œæ‚²è§‚æ´¾ã€‚å¯¹äºä¹è§‚æ´¾è€Œè¨€ï¼Œä»–ä»¬æ€»è®¤ä¸ºäº‹æƒ…æ€»ä¼šæœç€å¥½çš„æ–¹å‘å‘å±•ï¼Œæ€»è®¤ä¸ºå‡ ä¹ä¸ä¼šåäº‹ï¼Œæˆ‘å·²å¯ä»¥éšæ„çš„å»åšäº‹ã€‚ä½†æ˜¯å¯¹äºæ‚²è§‚æ´¾æ¥è¯´ï¼Œä»–ä»¬è®¤ä¸ºå‡ºé”™æ˜¯ä¸€ç§å¸¸æ€ï¼Œæ‰€ä»¥æ— è®ºäº‹æƒ…å¤§å°éƒ½ä¼šè€ƒè™‘çš„é¢é¢ä¿±åˆ°ï¼Œæ»´æ°´ä¸æ¼ã€‚</p>
<p>åœ¨ä¸¤ç§æ´¾åˆ«å¯¹åº”åœ¨å¹¶å‘ä¸­å°±æ˜¯åŠ é”å’Œæ— é”ï¼Œä¹Ÿå°±æ˜¯è¯´åŠ é”æ˜¯ä¸€ç§æ‚²è§‚çš„ç­–ç•¥ï¼Œè€Œæ— é”æ˜¯ä¸€ç§ä¹è§‚çš„ç­–ç•¥ã€‚å¯¹äºé”ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒäº‹è®¿é—®ä¸€ä¸ªä¸´ç•Œèµ„æºï¼Œå®å¯ç‰ºç‰²æ€§èƒ½è®©çº¿ç¨‹ç­‰å¾…ï¼Œä¹Ÿä¸ä¼šè®©ä¸€ä¸ªçº¿ç¨‹ä¸åŠ é”è®¿é—®ä¸´ç•Œèµ„æºã€‚å¯¹äºæ— é”ï¼Œå®ƒä¼šå‡å®šå¯¹èµ„æºçš„è®¿é—®æ˜¯æ²¡æœ‰å†²çªçš„ã€‚ä¹Ÿå°±æ˜¯å¤šä¸ªçº¿ç¨‹å¯¹ä¸´ç•Œèµ„æºçš„è®¿é—®æ˜¯æ²¡æœ‰å†²çªçš„ã€‚æ—¢ç„¶æ²¡æœ‰å†²çªï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ç­‰å¾…ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½å¯ä»¥ä¸éœ€è¦ç­‰å¾…çš„æ‰§è¡Œä¸‹å»ã€‚å¦‚æœé‡åˆ°äº†å†²çªï¼Œæ€ä¹ˆåŠï¼Ÿè¿™é‡Œæ— é”ç­–ç•¥ä½¿ç”¨äº†ä¸€ç§ç§°ä¸ºCASçš„æŠ€æœ¯æ¥ä¿è¯çº¿ç¨‹æ‰§è¡Œçš„å®‰å…¨æ€§ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“è®¨è®ºä¸€ä¸‹CASã€‚</p>
<h2 id="æ— é”è§£å†³å†²çªçš„åŠæ³•cas">æ— é”è§£å†³å†²çªçš„åŠæ³•ï¼šCAS</h2>
<p>CASçš„å…¨ç§°æ˜¯Compare And Swapå³æ¯”è¾ƒå’Œäº¤æ¢ã€‚</p>
<p>CASç®—æ³•çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šå®ƒåŒ…å«ä¸‰ä¸ªå‚æ•°çš„å˜é‡CAS(V, E, N)ã€‚ä½œç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>V è¡¨ç¤ºè¦æ›´æ–°çš„å€¼ã€‚</li>
<li>E è¡¨ç¤ºé¢„æœŸçš„å€¼ã€‚</li>
<li>N è¡¨ç¤ºæ–°å€¼ã€‚</li>
</ul>
<p><strong>ä»…å½“Vå€¼ç­‰äºEå€¼çš„ï¼Œæ‰ä¼šå°†Vå€¼è®¾ç½®ä¸ºNå€¼</strong>ï¼Œå¦‚æœVå€¼å’ŒEå€¼ä¸åŒï¼Œåˆ™è¯´æ˜å·²ç»æœ‰å…¶ä»–çº¿ç¨‹åšäº†æ›´æ–°ï¼Œå½“å‰çº¿ç¨‹ä»€ä¹ˆéƒ½ä¸åšã€‚CVSè¿”å›çš„æ˜¯å½“å‰Vçš„çœŸå®å€¼ã€‚
CASæ˜¯ä¹è§‚æ´¾ï¼Œæ€»è®¤ä¸ºè‡ªå·±å¯ä»¥æ“ä½œæˆåŠŸã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨CASæ¥ç»™ä¸€ä¸ªå˜é‡è®¾ç½®æ—¶ï¼Œåªæœ‰ä¸€ä¸ªä¼šæˆåŠŸï¼Œå…¶å®ƒçš„éƒ½ä¼šå¤±è´¥ï¼Œä½†æ˜¯CASå¾ˆä¹è§‚ï¼Œå¤±è´¥äº†å°±å¤±è´¥äº†ï¼Œå¯ä»¥å†æ¬¡å°è¯•ã€‚</p>
<h2 id="javaä¸­çš„æŒ‡é’ˆunsafeç±»">Javaä¸­çš„æŒ‡é’ˆï¼šUnsafeç±»</h2>
<p>What? Javaä¸­ä¹Ÿæœ‰æŒ‡é’ˆã€‚Unsfaeç±»å°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œä¸å®‰å…¨ï¼Œé‡Œé¢æœ‰ä¸€äº›å‘Cè¯­è¨€çš„æŒ‡é’ˆä¸€æ ·ç›´æ¥æ“ä½œå†…å­˜çš„æ–¹æ³•ã€‚å¹¶ä¸”å®˜æ–¹ä¹Ÿä¸æ¨èç›´æ¥ä½¿ç”¨Unsafeç±»ã€‚ä½†æ˜¯CASçš„å®ç°ç”¨åˆ°äº†è¿™ä¸ªç±»ã€‚
ä¸‹é¢æ¥çœ‹çœ‹Unsafeä¸­çš„ä¸€äº›æ–¹æ³•ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">// åˆ†é…å†…å­˜
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">allocateMemory</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">long</span> var1<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#998;font-style:italic">// é‡æ–°åˆ†é…å†…å­˜
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">reallocateMemory</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">long</span> var1<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var3<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#998;font-style:italic">// æ‹·è´å†…å­˜
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">copyMemory</span><span style="color:#000;font-weight:bold">(</span>Object var1<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var2<span style="color:#000;font-weight:bold">,</span> Object var4<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var5<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var7<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#998;font-style:italic">// é‡Šæ”¾å†…å­˜
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">freeMemory</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">long</span> var1<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#998;font-style:italic">// è·å–èµ·å§‹åœ°å€
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getAddress</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">long</span> var1<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>


<span style="color:#998;font-style:italic">// è·å–æ“ä½œç³»ç»Ÿå†…å­˜é¡µå¤§å°
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">pageSize</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">.</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000;font-weight:bold">.</span>
</code></pre></td></tr></table>
</div>
</div><p>Unsafeä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥å°†çº¿ç¨‹æŒ‚èµ·å’Œæ¢å¤ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">// çº¿ç¨‹è°ƒç”¨æ–¹æ³•ï¼Œå°†çº¿ç¨‹æŒ‚èµ·
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">unpark</span><span style="color:#000;font-weight:bold">(</span>Object var1<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#998;font-style:italic">// çº¿ç¨‹æ¢å¤
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">park</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">boolean</span> var1<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var2<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
</code></pre></td></tr></table>
</div>
</div><p>Unsafeä¸­çš„å…³äºCASçš„æ“ä½œï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">compareAndSwapObject</span><span style="color:#000;font-weight:bold">(</span>Object var1<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var2<span style="color:#000;font-weight:bold">,</span> Object var4<span style="color:#000;font-weight:bold">,</span> Object var5<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">compareAndSwapInt</span><span style="color:#000;font-weight:bold">(</span>Object var1<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var2<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> var4<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> var5<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">compareAndSwapLong</span><span style="color:#000;font-weight:bold">(</span>Object var1<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var2<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var4<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> var6<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
</code></pre></td></tr></table>
</div>
</div><p>CASçš„æ“ä½œçš„æ ¸å¿ƒå®ç°æ˜¯è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚
ä¸‰ä¸ªæ–¹æ³•çš„å‚æ•°éƒ½ç±»ä¼¼ï¼Œåˆ†åˆ«ä¸ºï¼š</p>
<ol>
<li>CASéœ€è¦æ›´æ”¹å˜é‡çš„å¯¹è±¡ï¼›</li>
<li>å¯¹è±¡å†…å­˜çš„åç§»é‡;</li>
<li>æœŸæœ›å€¼</li>
<li>éœ€è¦è®¾ç½®çš„å€¼</li>
</ol>
<p>å…¶ä¸­åç§»é‡å¯ä»¥é€šè¿‡Unsafeç±»ä¸­çš„objectFieldOffset()æ–¹æ³•è·å–åˆ°ï¼Œè¿™äº›æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">native</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">objectFieldOffset</span><span style="color:#000;font-weight:bold">(</span>Field field<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
</code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºintï¼Œlongï¼Œbooleanç±»å‹çš„ç›¸å…³æ“ä½œä¸æ˜¯åŸå­æ€§çš„ï¼Œæ‰€ä»¥JDKåœ¨1.5ä¹‹åæä¾›äº†atomicåŒ…ï¼ˆå…·ä½“åœ¨<code>java.util.concurrent.atomic</code>ä¸­ï¼‰æ¥å°†è¿™äº›æ“ä½œå˜æˆåŸå­æ“ä½œã€‚</p>
<p>ä¸‹é¢çš„å›¾ç‰‡ä¸­çš„æ˜¯atomicä¸‹æä¾›çš„åŸå­æ“ä½œçš„ç±»ï¼š
<img src="https://img-blog.csdn.net/20181017155907620?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N0YXJleHBsb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="image.png"></p>
<p>è¿™é‡Œä»¥AtomicIntegeræ¥è¿›è¡Œåˆ†æï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">AtomicInteger</span> <span style="color:#000;font-weight:bold">extends</span> Number <span style="color:#000;font-weight:bold">implements</span> java<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">io</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Serializable</span> <span style="color:#000;font-weight:bold">{</span>
    
    <span style="color:#998;font-style:italic">// å®ä¾‹åŒ–Unsafe
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">final</span> Unsafe unsafe <span style="color:#000;font-weight:bold">=</span> Unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getUnsafe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    
    <span style="color:#998;font-style:italic">// valueOffsetå˜é‡ä¿å­˜çš„æ˜¯valueä¸­çš„åç§»é‡ï¼Œè¿™ä¸€ç‚¹å¯ä»¥åœ¨ä¸‹é¢çš„staticåˆå§‹åŒ–å—ä¸­å¯ä»¥çœ‹å‡º
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">long</span> valueOffset<span style="color:#000;font-weight:bold">;</span>

    <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#998;font-style:italic">// è·å–valueçš„åç§»é‡
</span><span style="color:#998;font-style:italic"></span>            valueOffset <span style="color:#000;font-weight:bold">=</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">objectFieldOffset</span>
                <span style="color:#000;font-weight:bold">(</span>AtomicInteger<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getDeclaredField</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;value&#34;</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>Exception ex<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000;font-weight:bold">throw</span> <span style="color:#000;font-weight:bold">new</span> Error<span style="color:#000;font-weight:bold">(</span>ex<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">private</span> <span style="color:#000;font-weight:bold">volatile</span> <span style="color:#458;font-weight:bold">int</span> value<span style="color:#000;font-weight:bold">;</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * é€šè¿‡intå€¼å®ä¾‹åŒ–ä¸€ä¸ªAtomicIntegerå¯¹è±¡
</span><span style="color:#998;font-style:italic">     */</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">AtomicInteger</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> initialValue<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        value <span style="color:#000;font-weight:bold">=</span> initialValue<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * å®ä¾‹åŒ–ä¸€ä¸ªAtomicIntegerå¯¹è±¡ï¼Œå…¶åˆå§‹å€¼ä¸º0
</span><span style="color:#998;font-style:italic">     */</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">AtomicInteger</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">}</span>
    
    <span style="color:#998;font-style:italic">// è·å–å½“å‰å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> value<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#998;font-style:italic">// è®¾ç½®å½“å‰å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> newValue<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        value <span style="color:#000;font-weight:bold">=</span> newValue<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// å»¶è¿Ÿè®¾å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">lazySet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> newValue<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">putOrderedInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> newValue<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// è®¾ç½®æ–°å€¼è·å–æ—§å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getAndSet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> newValue<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndSetInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> newValue<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// CASæ“ä½œï¼ŒæŠŠå½“å‰å€¼å’Œé¢„æœŸå€¼åšæ¯”è¾ƒï¼Œç›¸å½“æ—¶è®¾ç½®æ–°å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">compareAndSet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> expect<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> update<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">compareAndSwapInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> expect<span style="color:#000;font-weight:bold">,</span> update<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">weakCompareAndSet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> expect<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> update<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">compareAndSwapInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> expect<span style="color:#000;font-weight:bold">,</span> update<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// å½“å‰å€¼åŠ 1ï¼Œè¿”å›æ—§å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getAndIncrement</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndAddInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> 1<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// å½“å‰å€¼-1ï¼Œè¿”å›æ—§å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getAndDecrement</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndAddInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">-</span>1<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// å½“å‰å€¼åŠ ä¸Šdeltaï¼Œç„¶åè¿”å›æ—§å€¼
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getAndAdd</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> delta<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndAddInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> delta<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// å½“å‰å€¼åŠ 1ï¼Œç„¶åè¿”å›
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">incrementAndGet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndAddInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> 1<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
    
    <span style="color:#998;font-style:italic">// å½“å‰å€¼å‡1ï¼Œè¿”å›è¿”å›
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">decrementAndGet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndAddInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">-</span>1<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// å½“å‰å€¼åŠ ä¸Šdeltaï¼Œç„¶åè¿”å›
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">final</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">addAndGet</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> delta<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> unsafe<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAndAddInt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> valueOffset<span style="color:#000;font-weight:bold">,</span> delta<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> delta<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// ...
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­çš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½ç›´æ¥æˆ–è€…é—´æ¥ä½¿ç”¨äº†CASæ¥ä¿è¯å®‰å…¨ã€‚</p>
<p>é™¤äº†ä¸Šé¢çš„å¯¹äºåŸºæœ¬å˜é‡çš„Atomicç±»ï¼Œè¿˜æœ‰å…³äºæ™®é€šå¯¹è±¡å¼•ç”¨çš„Atmoicç±»ã€‚</p>
<h2 id="atomicreference-æ— é”çš„å¼•ç”¨">AtomicReference æ— é”çš„å¼•ç”¨</h2>
<p>AtomicReferenceå’ŒAtmoicIntegeréå¸¸ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„å°±æ˜¯AtmoicIntegeræ˜¯å¯¹æ•´æ•°çš„å°è£…ï¼Œè€ŒAtmoicReferenceæ˜¯å¯¹æ™®é€šå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å®ƒå¯ä»¥ä¿è¯åœ¨ä¿®æ”¹å¯¹è±¡å¼•ç”¨æ—¶çº¿ç¨‹çš„å®‰å…¨æ€§ã€‚</p>
<p>CASä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ABAã€‚CASæ¯”è¾ƒçš„æ˜¯å¯¹è±¡ä¸­çš„å€¼å’ŒæœŸæœ›å€¼ï¼Œä½†æ˜¯æœ‰å¯èƒ½åœ¨ä½ è·å–åˆ°å½“å‰å¯¹è±¡çš„æ•°æ®åï¼Œåœ¨å‡†å¤‡ä¿®æ”¹ä¸ºæ–°å€¼ä¹‹å‰ï¼Œå¯¹è±¡çš„å€¼è¢«å…¶ä»–çº¿ç¨‹è¿ç»­ä¿®æ”¹ä¸¤æ¬¡ï¼Œè€Œä¸”ç»è¿‡è¿™ä¸¤æ¬¡ä¿®æ”¹ä¹‹åï¼Œå¯¹è±¡æœ‰æ¢å¤ä¸ºæ—§å€¼ã€‚è¿™æ ·ï¼Œå‰åçš„ç»“æœçœ‹ä¼¼æ²¡æœ‰è¢«æ”¹è¿‡ï¼Œä½†æ˜¯å…¶å®å·²ç»è¢«ä¿®æ”¹äº†2æ¬¡ã€‚è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š
<img src="https://img-blog.csdn.net/20181010171642689?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N0YXJleHBsb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå‘ç”Ÿè¿™ç§äº‹æƒ…çš„å¯èƒ½æ€§å¾ˆå°ã€‚è€Œä¸”å³ä½¿å‘ç”Ÿäº†ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªæ•°å­—ï¼Œè¢«ä¿®æ”¹ä¸€æ¬¡åï¼Œåœ¨ä¿®æ”¹å›å»ï¼Œä¸ä¼šå¯¹CASäº§ç”Ÿä»€ä¹ˆå½±å“ã€‚</p>
<p>ä½†æ˜¯æœ‰æ—¶å€™åœ¨ä¸€äº›å…·ä½“é—®é¢˜ä¸­è¿™ç§æƒ…å†µå°±æœ‰å¯èƒ½å‘ç”Ÿã€‚æ‰€ä»¥åœ¨JDKä¸­æä¾›äº†AtomicStampedReferenceæ¥è§£å†³è¿™ç§é—®é¢˜ã€‚</p>
<h2 id="atomicstampedreference">AtomicStampedReference</h2>
<p>AtomicStampedReferenceåœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ—¶é—´æˆ³ã€‚å½“AtmoicStampedReferenceå¯¹åº”çš„æ•°å­—è¢«ä¿®æ”¹æ—¶ï¼Œé™¤äº†æ›´æ–°æ•°æ®æœ¬èº«ï¼Œè¿˜å¿…é¡»æ›´æ–°æ—¶é—´æˆ³ã€‚å½“AtomicStampedReferenceè®¾ç½®å¯¹è±¡å€¼æ—¶ï¼Œå¯¹è±¡å’Œæ—¶é—´æˆ³éƒ½å¿…é¡»æ»¡è¶³æœŸæœ›å€¼ï¼Œæ‰ä¼šå†™å…¥æˆåŠŸã€‚é€šè¿‡ç»´æŠ¤æ—¶é—´æˆ³èƒ½æœ‰æ•ˆçš„é˜²æ­¢ABAé—®é¢˜ã€‚</p>
<p>AtmoicStampedReferenceçš„å‡ ä¸ªAPIåœ¨Atmomicçš„åŸºç¡€ä¸Šæ–°å¢äº†å‡ ä¸ªæœ‰å…³æ—¶é—´æˆ³çš„ä¿¡æ¯ã€‚</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">// å‚æ•°ä¸ºï¼šæœŸæœ›å€¼ï¼Œæ–°å€¼ï¼ŒæœŸæœ›æ—¶é—´æˆ³ï¼Œæ–°çš„æ—¶é—´æˆ³
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">compareAndSet</span><span style="color:#000;font-weight:bold">(</span>V   expectedReference<span style="color:#000;font-weight:bold">,</span>
                                 V   newReference<span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#458;font-weight:bold">int</span> expectedStamp<span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#458;font-weight:bold">int</span> newStamp<span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#998;font-style:italic">// è·å–ç´¢å¼•
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> V <span style="color:#900;font-weight:bold">getReference</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#998;font-style:italic">// è·å–æ—¶é—´æˆ³
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getStamp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#998;font-style:italic">// è®¾ç½®å½“å‰å¯¹è±¡å¼•ç”¨å’Œæ—¶é—´æˆ³
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">set</span><span style="color:#000;font-weight:bold">(</span>V newReference<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> newStamp<span style="color:#000;font-weight:bold">)</span>
</code></pre></td></tr></table>
</div>
</div>
        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>åŸæ–‡ä½œè€…ï¼š</strong><a rel="author" href="https://blog.mengchen.online">MC</a></li>
        <li style="word-break:break-all"><strong>åŸæ–‡é“¾æ¥ï¼š</strong><a href="https://blog.mengchen.online/post/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E6%97%A0%E9%94%81/">https://blog.mengchen.online/post/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E6%97%A0%E9%94%81/</a></li>
        <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ˆä½œè€…ï¼ŒåŸæ–‡é“¾æ¥ï¼‰ï¼Œå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BA%8B%E7%89%A9%E5%92%8C%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/">æ•°æ®åº“çš„äº‹ç‰©å’Œå¹¶å‘é—®é¢˜</a></li>
        
        <li><a href="/about/">å…³äºæˆ‘</a></li>
        
        <li><a href="/tools/">å·¥å…·</a></li>
        
        <li><a href="/archives/">å½’æ¡£</a></li>
        
        <li><a href="/search/">æœç´¢</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            æ²¡æœ‰æ ‡ç­¾
            
        </div>
    </article>
    
    

<div id="vcomments"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script type="text/javascript">
  new Valine({
    el: '#vcomments',
    appId: 'Wh8pwLoR0pjRL97Q8rlJp9jS-gzGzoHsz',
    appKey: '4QT1DCo0KbARIjnlkGHV51KG',
    notify: 'false',
    verify: 'false',
    avatar: 'mm',
    placeholder: 'è¯´ç‚¹ä»€ä¹ˆå§...',
    visitor: 'true',
    avatar: 'identicon'
  });
</script>
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://blog.mengchen.online/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://blog.mengchen.online">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    

    
    <section class="widget">
        <h3 class="widget-title">æ–‡ç« ç›®å½•</h3>
<ul class="widget-list">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#æ— é”è§£å†³å†²çªçš„åŠæ³•cas">æ— é”è§£å†³å†²çªçš„åŠæ³•ï¼šCAS</a></li>
    <li><a href="#javaä¸­çš„æŒ‡é’ˆunsafeç±»">Javaä¸­çš„æŒ‡é’ˆï¼šUnsafeç±»</a></li>
    <li><a href="#atomicreference-æ— é”çš„å¼•ç”¨">AtomicReference æ— é”çš„å¼•ç”¨</a></li>
    <li><a href="#atomicstampedreference">AtomicStampedReference</a></li>
  </ul>
</nav>
</ul>
    </section>
    

    <section class="widget">
        <h3 class="widget-title">æœ€è¿‘æ–‡ç« </h3>
<ul class="widget-list">
    
    <li>
        <a href="https://blog.mengchen.online/post/%E4%BD%BF%E7%94%A8hugo&#43;github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" title="ä½¿ç”¨hugo&#43;githubæ­å»ºåšå®¢">ä½¿ç”¨hugo&#43;githubæ­å»ºåšå®¢</a>
    </li>
    
    <li>
        <a href="https://blog.mengchen.online/post/test/" title="Test">Test</a>
    </li>
    
    <li>
        <a href="https://blog.mengchen.online/post/%E5%85%B3%E4%BA%8EJava%E4%B8%AD%E7%9A%84%E4%BC%A0%E5%8F%82%E6%98%AF%E5%80%BC%E4%BC%A0%E9%80%92%E8%BF%98%E6%98%AF%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/" title="å…³äºJavaä¸­çš„ä¼ å‚æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’">å…³äºJavaä¸­çš„ä¼ å‚æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’</a>
    </li>
    
    <li>
        <a href="https://blog.mengchen.online/post/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E6%97%A0%E9%94%81/" title="Java å¹¶å‘ä¹‹æ— é”">Java å¹¶å‘ä¹‹æ— é”</a>
    </li>
    
    <li>
        <a href="https://blog.mengchen.online/post/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BA%8B%E7%89%A9%E5%92%8C%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/" title="æ•°æ®åº“çš„äº‹ç‰©å’Œå¹¶å‘é—®é¢˜">æ•°æ®åº“çš„äº‹ç‰©å’Œå¹¶å‘é—®é¢˜</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">åˆ†ç±»</h3>
<ul class="widget-list">
    
    <li><a href="https://blog.mengchen.online/categories/Java/">Java (2)</a></li>
    
    <li><a href="https://blog.mengchen.online/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">åšå®¢æ­å»º (1)</a></li>
    
    <li><a href="https://blog.mengchen.online/categories/%E5%B9%B6%E5%8F%91/">å¹¶å‘ (1)</a></li>
    
    <li><a href="https://blog.mengchen.online/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“ (1)</a></li>
    
</ul>
    </section>

    

    
<section class="widget">
    <h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.flysnow.org/" title="é£é›ªæ— æƒ…çš„åšå®¢">é£é›ªæ— æƒ…çš„åšå®¢</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">å…¶å®ƒ</h3>
        <ul class="widget-list">
            <li><a href="https://blog.mengchen.online/index.xml">æ–‡ç«  RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2020 <a href="https://blog.mengchen.online">ğŸŒŸè¡Œè€… åšå®¢ By MC</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/flysnow-org/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

</body>

</html>